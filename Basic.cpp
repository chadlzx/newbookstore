#include<bits/stdc++.h>

using namespace std;
/*
author: chad 闂傚倷绀侀幖顐︽嚐椤栫偛鐤悹鎭掑妽瀹曟煡鏌￠崘锝呬壕濠?
student id: 518030910426 
class type: class A
class id: F1803017
*/

/*
闂傚倷娴囧銊╂嚄閸撲焦宕叉繝闈涚墢缁€濠囨倵閿濆骸澧┑顖氥偢閺岀喓鎲撮崟顐⑿曢梺鍛婂焹閸嬫捇姊绘担绛嬪殐闁告挻姘ㄩ幑銏ゅ幢濞戞瑥鍓规俊銈忕到閸燁垶寮?
婵犵妲呴崑鎾跺緤妤ｅ啯鍋嬮柡鍥ュ灩閸屻劍绻涢幋娆忕仾闁哄拋鍓熼幃姗€鎮欑捄渚闂佸啿鍢查悧蹇曟閹烘挸绶炲┑鐘插珔閿濆鍤夐柍鍝勫暊閸嬫挸鈻撻崹顔界亪缂備胶绮崝娆撳Υ閸涢偊妲奸梺鐟板槻閹虫ê顕ｉ幘顔藉€婚柛鈩冾焺閻斿吋鈷戦柤濮愬€曟禒婊勪繆椤愩埄鍤熸俊?
	闂傚倷鑳堕…鍫㈡崲閹扮増鍋嬮柟閭﹀枟瀹曞弶淇婇姘倯闁稿锕㈤幃妤呭捶椤撶喎宀竌d闂傚倷鐒︾€笛呯矙閹达附鍎楀ù锝堛€€閸嬫挸顫濋妷銉т紕闂侀€炲苯澧紒瀣浮閺佸鈹戦悩顐壕闂佺粯纰嶉锕巑and.txt,闂傚倷鑳堕崕鐢稿疾濞戙垺鍋ら柕濞у嫭娈伴柣搴ㄦ涧閹诧紕鈧碍宀搁幃褰掑炊閵娿儳绁风紓浣瑰絻濞硷繝寮诲☉妯锋婵炲棗绻掓禍浼存⒑绾懐鍫柛濠冪箖娣?
	闂傚倷绀侀崥瀣儑瑜版帒纾块柟娈垮枤缁犳柨顭跨捄鍝勵槵闁稿鎸搁埥澶娾枍椤撗傜盎闁挎洏鍨介、鏃堝醇閻斿憡鐝柣搴″帨閸嬫捇鏌涢幇顓炲姢闁哄拋鍘剧槐鎾诲磼濮橆剚鐏撻梺鍝ュУ瀹€鎼佸春閵忋倕绀傞柛蹇曞帶閸斿懘妫呴銏″闁圭顭峰畷浼村川鐎涙鍘介梺鎸庣箓閹虫劙鎮為崨濠勭闂傚倹娼欏畵鍡欌偓瑙勬处娴滅偞绂掗敃鍌涘€锋い鎺戝€搁拏瀣⒒閸屾瑧璐伴柛瀣噹椤繈濡搁埡浣烘煣濡炪倖鍔ч梽鍕夐崼鐔翠簻妞ゆ劦鍋勯弸銈囩磼閳ь剟宕熼娑氬幗濡炪値鍋掗崜娆愪繆娴犲鐓曢柍鍝勫€诲ú瀵糕偓瑙勬穿缁插潡鍩€椤掑﹦绉靛ù婊勵殜瀹曟垿濡搁埡鍌滃弳濠电偞鍨堕敃鈺佄ｉ崼鏇熺厓?
缂傚倸鍊烽悞锕傘€冭箛娑樼婵炴垶姘ㄩ崡姘舵煛婢跺鐏嶉柡瀣叄閺屽秹濡烽妸锔惧涧闂佺瀛╅悷鈺呭蓟濞戙垹绫嶉柟瀵稿Т鐢劎绱撴担浠嬪摵缂佽鐗嗛悾宄邦潩椤戣姤顫嶅┑鈽嗗灥閸嬫劖寰?user 闂傚倷绀侀幖顐﹀磹缁嬫５娲晲閸涱亝鐎婚梺闈涚箞閸婃牠寮查鍕€堕柣鎰煐椤ュ鏌ｈ箛銉х？闁逞屽墰閸嬶綁宕愬☉姗嗘禆闁靛ň鏅涚粈澶愭煟閺傚灝鎮戦柛搴″閵囧嫰寮埀顒勵敄濞嗘挸瑙﹂柛宀€鍋為悡鏇熶繆閵堝嫮鍔嶇紒鈧崘鈺€绻嗘い鎰枑濞呭牏绱掗悩宕団槈閾绘牠鏌涢幇顓炲姢闁诡喕绶氬娲嚒閵堝懍绮跺┑鈽嗗亝閻╊垶骞冨ú顏勭闁挎洍鍋撴俊顐ｏ耿閺屾盯濡烽鐐搭€嶅銈嗗姃缁瑩寮婚妸銉㈡婵☆垰鐏濋顓㈡⒑閹肩偛濡奸柣蹇斿哺楠炲牓濡歌閸嬫捇鏁愭惔鈥茬凹闂佽棄鍊搁澶愬蓟閳╁啯濯撮柣鐔煎亰閳ь剚绮庣槐鎺撴媴閸濄儲鎲肩紓?
	user 闂傚倷绀侀幖顐﹀磹閻熼偊鐔嗘慨妞诲亾鐎规洖缍婂畷锟犳倻閸℃鐣肩紓鍌欐祰濞咃綁骞愮缓鐚?闂傚倷鐒﹀鍨焽閸ф绀夌€广儱顦弰銉︾箾閹存瑥鐏╅柣顓燁殜閹鏁愭惔婵堟殫闂佺顑冮崝鎴﹀蓟閵娿儮妲堟慨妤€妫欒倴闂?
闂備浇顕уù鐑藉极婵犳艾鐒垫い鎺嶈兌閵嗘帡鏌よぐ鎺旂暫闁哄本绋戦～婵嬵敆閸屾凹鏉哥紓浣鸿檸閸樺ジ鎮ユ總鍝ュ祦闁逞屽墰閹茬鐣濋埀顒傚垝椤撱垹纾奸柣鎰摠濞呮牠鏌ｈ箛鏇炰粶濠⒀嗘鍗遍柕濠忓缁犻箖鏌涢悩鍛緲閳ь剚顨堢槐娆愮節濮橆厾鍘遍梺鐟邦嚟婵嘲危閻ㄢ偓valid\n

闂傚倷鐒﹀鍨焽閸ф绀夌€广儱顦弰銉︾箾閹存瑥鐏╃紒鐙欏洦鐓曢柟浼存涧閺嬬喐銇勬惔銏㈡噧闁宠棄顦甸獮姗€骞囨担鍝勫綃缂傚倷娴囨ご鍝ユ崲閸儱绠犻柟鎯х摠婵挳鎮峰▎蹇擃伀闁告埊绻濆娲箰鎼达絺妲堥梺鍏兼た閸ㄥ爼鐛径鎰鐎瑰壊鍠栭弲鐘绘⒑闂堟侗妯堥柛銊ョ－缁牊寰勬繝搴㈠瘜闂侀潧鐗嗗Λ妤呭礉閵堝棎浜滈柟鎯х－缁夋椽鏌℃担鍝バゅù鐙呯畵閹瑩顢楅埀顒傛閿曞倹鈷戦悹瀣濡參宕靛▎鎴犵＝?7310

load [file] #7 闂傚倷绀侀幉鈥愁潖缂佹ɑ鍙忛柟顖ｇ亹?
exit #0 闂傚倸鍊风欢锟犲磻閳ь剟鏌涚€ｎ偅宕岄柡?
su [user] [passwd] #0 闂傚倷娴囬惃顐﹀幢閳轰焦顔勭紓?
logout #1  闂傚倷绀侀幉锟犳偡閿旂偓绠掗梺鑽ゅУ閸旀宕伴弽褜鍤曢柣銏犲閺佸倿鏌涢埄鍐夸緵濞寸媭鍣ｉ幃?
useradd [user闂傚倷鑳堕崑銊╁磿閸欏顩茬紒顖滅墘 [passwd] [7/3/1] [name] #3闂傚倷鐒︾€笛呯矙閹烘鍤屽Δ锝呭幗閻戣棄绀冩い鏃囧亹椤︻噣姊虹紒姗嗙劸濞存粠鍓熼、鏃堝础閻愨晜顫嶉梺鐟扮仢閸熲晝鑺辨總鍛婂€甸柛顭戝亝閻ㄦ垿鏌嶈閸撴繈锝炴径灞芥瀳鐎广儱鎷嬮悞浠嬫煕椤愮姴鍔滈柍閿嬫閺岀喖鏌囬敃鈧弸鐔兼煟閿濆鎲鹃柡宀嬬秮閿濈偤顢楅埀顒佷繆娴犲鐓曢柍鍝勫€诲ú鎾煛娴ｅ摜肖濞寸媴绠撻幊鏍煛閸愨晛鏋撻梻鍌欒兌閸樠囨偪閸ヮ灛娑㈠礋椤栨艾鐎梺鍛婎殘閸庢劙宕甸崼銉ョ骇闁绘劖娼欓ˉ瀣煟閻斿摜绠為柟顔筋焾缁犳盯骞橀崜渚囧悈缂傚倷绶￠悡鍫ュ礈閻旂厧绠犳繛鎴欏焺閺佸倿鏌涢弴銊ュ箻闁伙絾濞婂娲传閸曞灚笑闂佸摜鍠愬娆撯€栨繝鍋椽顢旈崨顓炲闂備礁鎲″ú锕傚窗閺嶎厔鍥煛閸涱喚鍘?
register [user闂傚倷鑳堕崑銊╁磿閸欏顩茬紒顖滅墘 [passwd] [name] #0闂傚倷鐒︾€笛呯矙閹烘柨鏋堢€广儱顦弸渚€鏌ｉ幇顒佹儓缂佲偓閸愵喗鍊堕柣鎰硾娴滆銇勮箛鎾宠埞闁宠棄顦甸獮娆撳礃瑜忛惄搴ㄦ⒑濮瑰洤鐒洪柛瀣工椤曪綁宕归銏㈢獮闁硅壈鎻徊鍧楊敊閹邦厾绠鹃悗娑欘焽閻绱掔€ｎ偄濮堢紒宀冮哺缁绘繈宕惰閻ｅ啿顪冮妶鍡欏缂侇喖绉归幃楣冩焼瀹ュ棛鍘告繝銏ｆ硾閿曘倝寮抽敐鍡曠箚?闂傚倷鐒﹀鍨焽閸ф绀夌€广儱顦弰?
delete [user闂傚倷鑳堕崑銊╁磿閸欏顩茬紒顖滅墘 #7闂傚倷鐒︾€笛呯矙閹烘鍤屽Δ锝呭暙閸ㄥ倻鎲搁悧鍫濈瑲闁抽攱妫冮弻鏇㈠醇濠靛浂妫ら梺鍛娚戦悷鈺呭蓟閿濆缍栨い鎺嗗亾濠碘€茬矙閺?
passwd [user闂傚倷鑳堕崑銊╁磿閸欏顩茬紒顖滅墘 [old闂傚倷鑳堕崑銊╁磿閸欏顩烽柣鏇犵）swd(if not root)] [new闂傚倷鑳堕崑銊╁磿閸欏顩烽柣鏇犵）swd] #1闂傚倷鐒︾€笛呯矙閹烘鏁嗛柣鐐甸兏t婵犵數鍋為崹鍫曞箰閸濄儳鐭撻柣鐔诲焽閳ь剚甯″畷婊勬媴閻熺増姣囧┑鐐舵彧缂嶄礁顭囬懡銈囩闁哄稁鍘介悡鏇㈡煙闁箑骞橀柟鍐插娣囧﹪顢曢顫敖闂侀€炲苯澧存繛浣冲吘娑樷槈閵忊€充函濠电姴锕ら悧濠囧疾椤掑嫭鍊堕柣鎰煐椤ュ鈧數澧楅幐鎼佹箒闂佹寧绻傚Λ娑㈠箠閸℃鐔嗛悹鍝勬惈椤忣厽顨ラ悙宸剶闁诡喗绮撻幊鐐哄Ψ閵堝洤绗￠梻?

[user-id] 闂傚倷绀侀幉锛勫垝鎼达絿绠旀慨鎺嬪€箂swd] 闂傚倷绀侀幉锟犳偋閺囥垹绠犻幖娣妼缁犳岸鏌涢銈呮瀾濞存嚎鍊濋弻锝夊箛椤旇姤姣勯梺杞扮窔缁犳牠寮婚敓鐘茬妞ゅ繐瀚呴妷鈺傜厓閻熸瑥瀚晶鐢碘偓娈垮枙缁瑩骞婇弽顓炵厸闁稿本绮嶅▓鎼佹⒒娴ｈ姤銆冮柣鎺炵畱椤灝顫滈埀顒勫箖妤︽妲鹃梺閫炲苯澧紒瀣浮閵嗗啴宕卞☉娆忓墾濠电娀娼уú銊╁煝閺冨牊鍊甸柨婵嗙凹缁ㄥ鏌ｈ箛鎿勫姛缂佽鲸甯￠獮鍡氼槻闁活煉绱曠槐鎺撴綇閵娧呯暫缂備礁顑呴ˇ顖烆敇婵傜閱囬柍鎯帮骏閸ㄨ棄顕?婵犵數鍋為崹鍫曞箹閳哄倻顩叉繝濠傜墛閸嬨倗鎲歌箛鏇炲灊?
[name] 婵犵數鍋為崹鍫曞箹閳哄懎鍌ㄩ柧蹇撴贡缁犳柨顭块懜闈涘閻熸瑱闄勯妵鍕箛閳轰讲鍋撻幇鏉挎瀬闁告洦鍨遍悡娑氣偓骞垮劚濞层垽鍩€椤掆偓椤戝洤危閹邦兘鏀介柛銉㈡杹閺嬫牠鎮楅獮鍨姎闁绘绻愰悺顓㈡⒑?婵犵數鍋為崹鍫曞箹閳哄倻顩叉繝闈涱儐閸庢垿鏌ｉ敐鍛槵闁?0婵犵數鍋為崹鍫曞箹閳哄倻顩叉繝濠傜墛閸嬨倗鎲搁弮鍫濈疇?

select [ISBN]
#3闂傚倷鐒︾€笛呯矙閹烘垹鏆嗛柟闂寸閻掑灚銇勯幒鍡椾壕濡炪倧瀵岄崹鍫曞箖閸撗呯妞ゃ垻顑峃婵犵數鍋為崹鍫曞箰妤ｅ啫纾块柕鍫濇礌閸嬫捇宕归锝囨闂侀€炲苯澧叉い顐㈩樀閹虫繃銈ｉ崘銊у姦濡炪倖甯掗崯顐ｇ鐟欏嫮绠鹃柛顐ゅ枎閻忓鈧娲栭悥鐓庣暦閿濆唯闁靛鍎哄顒勬⒒娴ｇ懓顕滅紒瀣灴閹本鎷呯悰鈥充壕婵ǜ鍎遍悘顏嗙磼鐎ｎ亶妲告い鎾炽偢瀹曘劑顢涘☉娆忔灈闂傚倷绶氬鑽ゆ嫻閻旂厧绀夌€光偓閸曨偄鐎銈嗙墱閸嬫稓绮堥崱妯肩闁瑰鍎愰悞鐣岀磼閹插鐣甸柟顔肩秺瀹曞爼鎳滃▓搴撳亾濡ょ垂N闂傚倷鐒﹂惇褰掑礉瀹€鈧埀顒佸嚬娴滎亜鐣峰┑瀣亜闁兼祴鏅涚粊锕傛煟閻樿崵绱版繛鍜冪到閳绘挸煤椤忓懐鍘遍棅顐㈡处濮婂綊寮搁崟顓犵＝鐎广儱妫楅悘锔剧磼瀹€鍕喚闁糕晛瀚板畷妯款槾缂佲偓閳ь剟姊绘担椋庝覆缂佹煡绠栭幃鐤樄闁糕晝鍋ゅ浠嬵敃閵堝鏀哄┑鐘灱濞夋盯鏁冮敂鍓х幓妞わ紕顢嘾ify闂備礁鎼ˇ顐﹀疾濠婂懐鐭欓柡宥庡幑閳ь兛绶氶獮瀣倷閻㈢數鏆俊鐐€栭崝鎴﹀垂瑜版帒鐤?
modify 闂傚倷鑳堕崑銊╁磿閺屻儱鐒垫い鎺嶈兌閹戒经N=[ISBN] 闂傚倷鑳堕崑銊╁磿閸欏顩烽柟璺虹崷e=[name] 闂傚倷鑳堕崑銊╁磿閸欏顩查柣搴ｅ灇hor=[author] 闂傚倷鑳堕崑銊╁磿閸欏顩烽柛褍顎厀ord=[keyword] 闂傚倷鑳堕崑銊╁磿閸欏顩烽柣鏍х┘ce=[price]
#3闂傚倷鐒︾€笛呯矙閹烘鍤岄柟顖嗗苯娈ㄥ銈嗗笒鐎氼剟寮告笟鈧弻鈩冨緞婵犲嫪铏庨柣鐘辩劍閻擄繝寮婚敐澶樻晜闁告劦鍘奸崢锟犳⒑閸濆嫭顥為柛鏃€鐟╁顐㈩吋閸ワ附鍕冮梺鍏肩ゴ閺呮繂危韫囨梻绠鹃柟瀵稿仦鐏忣厾绱掓径灞藉幋闁靛棗鎳橀弫鍐焵椤掍焦娅忛梻浣侯焾閺堫剛鎹㈤崟顓犵濠电姵纰嶉悡鏇㈢叓閸パ屽剰闁告棑绠撻弻鏇㈠幢濡も偓椤掋垽鏌熼娑欘梿缂佺姵鐩俊鐤槾妞わ富鍠楃换娑㈠级閹存繃鍊紒鐐緲缁夊鍙呴梺绉嗗嫷娈旀俊顐ｏ耿閹粙顢涢敐鍛亾缂備讲鍋撻柛鏇ㄥ灡閻撴盯鏌涢妷锝呭妞ゆ洘绮庨埀顒冾潐濞叉﹢鎮￠敓鐘茬疇闁规儳纾弳鍡涙煕閺囥劌澧い顐熲偓鏂ユ斀闁绘垵娲ㄧ粔顒併亜閺囧棗瀚崣蹇涙煟閹邦喖鍔嬮柡鍜佸墮椤法鎹勬笟顖浶ㄩ梺鑽ゅ枑閸旀牜鎹㈠☉銏犲耿妞ゆ挾濮烽惁鍫ユ⒑闁偛鑻晶顔姐亜閿旇娅嶉柟铏懇楠炲鏁傞挊澶婂闂備礁鎲″ú锔界濠婂嫭鍙忔繛鎴欏灪閻撶娀鏌ｉ妶搴＄仭闁绘繍浜弻锛勪沪閺傘倛鍚梺璇″灠閸熸潙鐣烽悢纰辨晜闁告劦浜為悾楣冩⒒?
import [quantity] [cost_price(in total)]
#3闂傚倷鐒︾€笛呯矙閹烘鍤屽Δ锝呭暞閸庡秹鏌曡箛銉х？闁崇粯鏌ㄩ埞鎴︽偐閹绘帗鐏撻梺绋跨應閸ャ劉鎷哄銈嗗姂閸╁嫬危閻戣姤鐓犻柛顭戝亜閻忔挳鏌熼姘殻鐎规洜鍠栭、鏃堝礋椤愵偅娴嗘繝鐢靛仜椤曨厽鎱ㄦ导鏉戠？闁哄被鍎遍悞鍨亜閹烘垵鏋ら柛銈嗙懇閺屾稑鈻庡Ο缁樺暱cost_price]闂傚倷鐒﹂惇褰掑礉瀹€鈧埀顒佸嚬娴滎亪骞冮幎绛嬫晬闁绘劖褰冮崬銊╂⒑閼归偊娼愬鐟版缁崵鐚鹃悞顤籥ntity]闂?
show 闂傚倷鑳堕崑銊╁磿閺屻儱鐒垫い鎺嶈兌閹戒经N=[ISBN] 闂傚倷鑳堕崑銊╁磿閸欏顩烽柟璺虹崷e=[name] 闂傚倷鑳堕崑銊╁磿閸欏顩查柣搴ｅ灇hor=[author] 闂傚倷鑳堕崑銊╁磿閸欏顩烽柛褍顎厀ord=[keyword]
#1闂傚倷鐒︾€笛呯矙閹烘鍤岄柟顖嗗苯娈ㄥ銈嗗笒鐎氼剟寮告笟鈧弻鈩冨緞婵犲嫪铏庨柣鐘辩劍閻擄繝寮婚敐澶樻晜闁告劦鍘奸崢锟犳⒑閸濆嫭顥為柛鏃€鐟╁顐㈩吋閸ワ附鍕冮梺鍏肩ゴ閺呮繂危韫囨梻绠鹃柟瀵稿仦鐏忣厾绱掓径灞藉幋闁靛棗鎳橀弫鍐焵椤掍焦娅忛梻浣侯焾閺堫剛鎹㈤崟顓犵濠电姵纰嶉悡鏇㈢叓閸パ屽剰闁告棑绠撻弻鏇㈠幢濡も偓椤掋垽鏌熼娑欘梿缂佺姵鐩俊鐤槾妞わ富鍣ｉ弻锝堢疀閹惧墎顔囧┑鈽嗗亝椤ㄥ牊绂嶉幖渚囨晪闁逞屽墴瀵粯绻濋崒銈呮倯闂佹悶鍎崝搴ㄥ汲閻樼粯鈷戦柟鑲╁仜閸旀氨鎲搁幍顔间槐鐎规洘绻堥幃銏ゅ传閵夘喗绁俊鐐紘閸愵亙绗塀N闂傚倷绀侀幉锟犳偡閳哄懎缁╅弶鍫氭櫆閺嗘粓鏌熼幆褏鎽犻柛搴ｅ枛閻擃偊宕堕妸锔炬缂傚倸鐗嗛…鐑藉蓟濞戙垹绠ｉ柣妯垮皺濞堛倗绱撴担浠嬪摵缂佽鐗嗚灋濞撴埃鍋撻柛鈹惧亾濡炪倖甯掗崐褰掑疮閸濆娊褰掓晲閸偅缍堥梺鍝勬閻楁捇寮婚悢鐓庣骇閻犳亽鍔庨鎴濐渻閵堝棙绀冪€光偓缁嬭法鏆﹂柕濞炬櫅缁狅綁鏌熼悜妯诲碍鐞氭﹢姊绘担渚劸缂佺粯鍨剁换娑欑節閸パ勭€銈嗘尵婵參宕戦幘鏂ユ婵炲棙蓱閻や線姊洪棃娑欘棞缂佸鎳撻悾鐑芥晲婢舵ɑ鏅滈梺鍛婁緱閸犳鈻撴导瀛樷拺鐟滅増甯楀▍婊呯磼閳ь剚鎷呴崫銉︽闂佺粯姊婚崢褏绮堥崒鐐寸厵闁诡垱婢樿闂佸搫妫欓惄顖炲箖?
show finance [time]
#7闂傚倷鐒︾€笛呯矙閹烘鏁嗛柣銏㈩潝e婵犵绱曢崑鎴﹀磹閺囩儑鑰块柛妤冨亼閳ь剚甯￠幃婊堟嚍閵夈儰鎮ｉ梻渚€娼ч¨鈧梻鍕钘濈憸鏃堝蓟閵娿儮妲堟俊顖濆亹閸旑喚绱撴笟鈧·鍌炲矗閸愩劎鏆︽繛鍡樻尰閸婄粯淇婇姘Щ濞存粓绠栭弻銈嗘叏閹邦兘鍋撻弽顓熷仼闂侇剙绉甸悡娑㈡煃瑜滈崜娑㈠箲閸曨垰浼犻柛鏇ㄥ亝鏉堝牆鈹戦悙鏉戠仸闁圭鎽滈埀顒佺▓閺呯姴顕ｉ锔绘晪闁逞屽墮閻ｅ嘲鈻庨幘鏉戜粡闁诲海鏁搁…鍫ユ嚀閸ф鈷戦柛娑橈功閸熻尙绱掗悩鍐茬伌鐎规洖缍婇、娑樷槈濞嗘垹肖闂備浇顫夐崕鎶藉疮閸啩鎺撳緞閹邦剛楠囬梺鍐叉惈閸婃瓕銇愰崬姊歮e]濠电姷鏁搁崑娑㈠几閹绢喖围闁搞儮鏅╅崯瀣⒑閼姐倕校闁告搩鍓氶幏鍛村箵閹哄秴顥氬┑鐐舵彧缁插潡鈥﹂崼銏㈢焼鐎光偓閸曨剛鍘遍梺鐟邦嚟婵挳宕濈€ｎ喗鐓欏┑鍌氭啞閺侀亶鏌熷畡鐗堝櫣妞ゎ厹鍔戦獮鍥敊缂併垺袩闂傚倷绀侀幉锛勬暜閹烘嚦娑樜旈崨顓熸К闂佺硶鍓濋悷褎绋夊鍡曠箚闁绘劖褰冮埛鏃€銇勮箛姘跺摵缂佺粯鐩畷杈疀閺冩垶缍堢紓鍌欐祰妞寸鐣濋幖浣哥畾闁告劦鍠栫粈瀣亜閹哄秶鍔嶆慨锝呮濮婅櫣绮欑捄銊х杽闂佺瀛╅悡鈥愁嚕椤愶富鏁嬮柍褜鍓欓悾宄扳枎閹惧磭鐣抽梺鐟版惈濡绂?
buy [ISBN] [quantity] #1闂傚倷鐒︾€笛呯矙閹烘挾鈹嶆繛宸簻缁愭淇婇婵嗗惞闁崇粯娲熼弻鐔风暋閹殿喚鍔搁梺鎼炲€曢、宄塀N闂傚倷绀侀幉锟犳偡閳哄惤澶愬箻閺傘儲鐏侀梺纭呮彧缁犳垿鎮欐繝鍥ㄧ厱婵炲棗绉撮崝姘攽椤旂晫鐓俼uantity]闂?

[ISBN] 婵犵數鍋為崹鍫曞箲娴ｅ壊娴栭柕濞у懐鐣舵繝銏ｆ硾閺堫剟骞嗛妷鈺傜厱婵炴垶鐟ラˉ瀣磼?0婵犵數鍋犻幓顏嗗緤閻ｅ瞼鐭撻悹楦裤€€閺嬫棃鏌熺€电浠﹀ù婧垮€濋弻锝夊箛椤旇姤姣勯梺杞扮窔缁犳牠骞冨Δ鈧埥澶娾枎濡崵鏆俊鐐€栭崹鎶芥倿閿斿墽鐭?
[name] 闂傚倷绀侀幉锛勫垝鎼达絿绠旀慨鎺撴偉thor] 闂備浇宕甸崑鐐哄礄瑜版帒纾婚柛鏇ㄥ亽閸ゆ洟鎮归崶褎鈻曢柛銈嗘礋閺岋繝宕堕埡浣风捕婵犵數鍋涘ú顓㈠蓟濞戙垹鍐€鐟滃酣宕甸埀顒勬⒑閸︻厽顏熺紓宥勭椤曪綁宕奸弴鐐嶃劍銇勯弽銊х煂妞わ腹鏅滅换娑㈠箣閻愭潙纰嶇紓浣割槹閹告娊鐛崱娑橀唶闁靛鍎抽悡鎴︽煟韫囨洖浠ч柡鍜佸亞缁岸宕稿Δ浣哄幈濠电偛妫楃换鎰枔閳哄啰纾奸弶鍫涘妼閸濇椽鏌℃担鍝バゅù鐙呯畵閹虫牠鍩￠崘鎯ф櫖闂?
闂傚倷绀侀幖顐︽偋濠婂牆绀堟繝闈涱儐椤ュ﹪鏌嶉崫鍕櫣缂佲偓閸愵喗鐓曟繛鎴濆船瀵箖鏌涢悢閿嬪缂佺粯绋撴禒锔剧矙閸喒鎷ゆ繝鐢靛Л閸嬫挸銆掑锝呬壕閻庤娲╃徊鎸庣閿曞倹鍋╃€光偓閳ь剟鍩炲☉銏♀拺?
闂傚倷绀侀幉锟犲礉閺囥垹绠犻幖鎼厛閺佸﹪鏌熼柇锕€骞橀柍缁樻⒒閳ь剙绠嶉崕閬嶆偋韫囨挾鎽ラ梻?婵犵數鍋為崹鍫曞箹閳哄倻顩叉繝闈涱儐閸庢垿鏌ｉ敐鍛槵闁?
[keyword] 闂傚倷娴囧銊╂嚄閸撲焦宕叉繝闈涚墢缁€濠囨倵閿濆骸澧柛瀣墬閵囧嫰骞囬埡浣轰患闂佽棄鍟伴崰鎾诲焵椤掍緡鍟忛柛鐘愁殔鐓ら柡宥庡厵娴滃綊鏌涜椤ㄥ懐绮堝畝鍕厱婵炴垶鑹鹃。鑲┾偓瑙勬礃婵炲﹪寮婚埄鍐ㄧ窞闁割偅绻傛慨椋庣磽娴ｄ粙鍝洪柣鐕傚缁瑦寰勬繝搴℃倯闂佸憡渚楅崰鏍礈閻㈠憡鈷戦柛娑橈功閹冲啴鏌ゅú璇茬仯婵″弶鍔欓崺锟犲川椤撶姷鍘梻浣告啞閸垶宕愬Δ鍐焼闁糕剝绋掗悡銉︾箾閹寸儐鐒鹃悗姘嵆閺屾稑鈻嶇拠鍙夊闁绘挶鍎查妵鍕籍閸パ傛睏闂佸湱鏅崰搴ㄥ煡婢舵劕妫樻繛鍡樺劤閸撹泛鈹?| (缂傚倸鍊烽悞锕€顫忚ぐ鎺撳亱婵犲﹤鐗嗛崥?闂傚倸鍊搁崐鎼佸箠韫囨稑钃熼柕濞у嫷娼熼梺纭呮彧闂勫嫰寮查鍕€堕柣鎰硾娴滃湱绱掗悩杈╃煓闁?
濠电姵顔栭崳顖滃緤閻ｅ本宕查悗锝庡枟閻撳倹绻濇繝鍌滃缂佲偓閸岀偞鐓欓柟顖涙緲琚氶梺鍝勬閻╊垶骞冨Δ鈧埥澶娾枎濡崵鏆︽繝鐢靛Л閸嬫挸霉閻撳寒鍤熼柛娆愭礃閵囧嫰骞囬埡浣轰患闂佽桨绀侀悥濂稿箖濡ゅ啯鍏滈柛婊€鐒︾紞鍫濃攽閳藉棗浜栭柛濠冩礋椤㈡岸鏁愭径濠傚祮闂佺粯鍔栬ぐ鍐煝韫囨梻绠鹃悗鐢殿焾琚ㄩ梺绋块瀹曨剟顢氶敐鍡╂Ч閹艰揪绲块悡鏃堟⒑缂佹ê鐏︽い顓炴处缁?
闂傚倷绀侀幉锟犲礉閺囥垹绠犻幖鎼厛閺佸﹪鏌熼悧鍫熺凡缂佺姵鍨块幃褰掑炊閵娿儳绁烽悷婊呭閻熴儵鍩ユ径鎰鐎规洖娉﹂妷褏纾煎璺猴功閹界姵绻?婵犵數鍋為崹鍫曞箹閳哄倻顩叉繝闈涱儐閸庢垿鏌ｉ敐鍛槵闁?
[quantity] 婵犵數鍋為崹鍫曞箰妤ｅ啫纾块柕鍫濐槸濮规煡鏌ㄥ┑鍡╂Ц闁哄绶氶幃浠嬵敍閿濆懏鐏撶紓浣插亾?100000闂?
闂備浇顕уù鐑藉极婵犳艾鐒垫い鎺嶈兌閵嗘帡鏌ら崷顓犫敋how闂傚倷鑳堕幊鎾绘倶濠靛牏鐭撶€规洖娲ㄧ粈濠囨煛閸愩劎澧涢柡鍜佸墰閳ь剙鍘滈崑鎾绘煕閹板吀绨介柣鎰礋濮婃椽宕ㄦ繝鍌滀患闂佺绨洪崐婵嬪箖瑜忕划娆忊枎閹勵吙闂傚鍋勫ú銈咁潩閿斿墽鐭嗛悗锝庡枟閻撱儲绻涢幋鐐垫噮妞わ絾鐓￠弻锝夋晜閼测晝锛熼梺璇″枟婢瑰棙绂掗敃鍌涘殐闁冲搫锕ｇ槐姗€姊绘担鍛婃儓闁绘绮撳畷婊堝Ω瑜庨～鏇熺節闂堟侗鍎忕紒鐘劦閺屽秷顧侀柛鎾跺枎椤曪綁宕归銏㈢獮婵犮垼娉涢ˇ杈╃不濮樿埖鈷戦悹鍥ｂ偓鍐插闂佹悶鍔岄悥鍏间繆閺夋埈鍚嬪璺侯儏閸擃喖顪冮妶鍡樼５闁稿鎸绘穱濠囶敃閿濆拋鍤嬬紓浣稿€圭敮鐐电磽閹炬剚娼?闂傚倸鍊搁崐鎼佸箠韫囨稑钃熼柕濞у嫷娼熼梺纭呮彧闂勫嫰寮查鍕€堕柣鎰硾娴滆顨ラ悙鍙夘棦闁哄备鈧剚鍚嬪璺侯儜缁辩數绱撴担铏瑰笡鐎光偓閹间礁绠栭柟顖嗏偓閺嬪酣骞栧ǎ顒€鈧劙骞忛埄鍐閺夊牆澧介崚鎵磼鐎ｎ亜顏俊鍙夊姇閳规垿宕堕妸銉ュΤ闂備浇顫夐崕宕囧椤撱垹绠洪柣妯肩帛閻撴洘鎱ㄥ鍡楀⒋妞ゅ孩顨呴埞鎴︻敊閹傛闂佹悶鍔嶉崕鎶藉煘閹达箑鐐婇柕濠忕畱椤忎即姊绘担鍝勪缓闁稿氦灏欓崚鎺戠暆閸曨剙浠遍悷婊勬瀵偄顓奸崶锔藉媰缂備焦绋戦鍡涘箹?


report finance #7闂傚倷鐒︾€笛呯矙閹烘鍎楁い鏃傚亾椤洖霉閻撳海鎽犻柛瀣ㄥ姂閺岋綁寮崒銈囧姼闂佽绻愬ú銈夊煡婢舵劕绠绘い鏍ㄧ煯婢规洟鏌ｆ惔銏╁晱闁哥姵纰嶉幈銊╁礈瑜忛惌鍫ユ煛閸曨偆绠抽柣銈傚亾闂備礁鎲￠崝蹇涘疾濞戞瑧顩插ù鐓庣摠閻撶喖鏌嶉崫鍕跺伐闁哄鍊栫换娑㈠醇閻旈浠奸梺鐟板槻缂嶅﹥鎱ㄩ埀顒勬煟濡儤鈻曟繛鍏煎▕濮婅櫣娑甸崨顖氱墯闂佺瀛╅幐铏繆閹绢喖绀冩い鏃囧Г濞呮牠鏌ｈ箛鏇炰粶濠⒀嗗Г缁旂喖骞囬鐟颁壕婵炲牆鐏濋弸娑氱磼缂佹﹩娈滅€规洟娼ч…銊╁川椤忓嫪澹?
report employee #7闂傚倷鐒︾€笛呯矙閹烘鍎楁い鏃傚亾椤洖霉閻撳海鎽犻柛瀣ㄥ姂閺岋綁寮崒銈囧姼闂佽绻愬ú銈夊煡婢舵劕绠绘い鏍ㄧ煯婢规洟鏌ｆ惔銏╁晱闁哥姵纰嶉幈銊╁礈瑜忛惌鍫ユ煛閸曨偆绠抽柣銈傚亾闂備礁鎲￠崝蹇涘疾濞戞瑧顩插ù鐓庣摠閻撶喖鏌嶉崫鍕跺伐闁哄鍊栫换娑㈠醇閻旈浼岄悗瑙勬磸閸斿矁鐏掗柡澶屽仦婢瑰棝鎯屽Δ鍛€甸悷娆忓閸嬬娀鏌涙惔銏狀棆缂佽京鍋ゅ顕€宕煎┑鍫㈡毎闂備礁鎲℃笟妤呭储婵傜鍑犵€光偓閸曨剙浠╁┑鐐村灱娴滎剟宕㈠鍛＜閺夊牄鍔庣粻姗€鏌熷畡閭﹀剶鐎殿喖澧庨幑鍕Ω椤噮鍙冨铏圭矙鐠恒劎顔戦梺绯曟櫆閻楃娀鐛弽顓熺叆閻庯綆鍋勯鎾斥攽閻樿鏀婚柛鏃€顨堢划鍫熷緞閹邦厾鍘搁悗骞垮劚濞层倗鏁崜浣虹＜闁规彃顑囩弧鈧梺纭呮珪閻╊垶銆侀弮鍫濈妞ゆ挾鍠愰惁?
log #7闂傚倷鐒︾€笛呯矙閹烘鍎楁い鏃傚亾椤洟鏌ｅΔ鈧悧濠冪閵堝鐓涢柛灞剧☉椤曟粎绱掗埀顒勫焵椤掑嫭鐓熼柣妯荤懃閸熸壆绮婚幍顔剧＜婵炲樊浜為悾鐑橆殽閻愭彃鏆ｉ柡浣稿€块幃娆擃敆閸屾粌鐐婇梻鍌欑劍閻綊宕濆畝鈧埀顒佸嚬閸樿壈鐏嬮梺鍐叉惈鐎氼噣鎮块埀顒€鈹戞幊閸婃洜鈧氨鍏樺畷顒勫礈娴ｇ懓鏋戦梺缁橆殔閻楀﹦绮氱捄銊х＜閺夊牄鍔庣粻鐐碘偓瑙勬礈婵炩偓鐎规洏鍔戦、娆戝枈閸欐妫紓鍌氬€风欢锟犲垂闂堟稓鏆﹂柣銏ゆ涧閸ㄦ繃绻涘顔荤盎缂佺姾鍋愰埀顒€绠嶉崕杈┾偓姘煎枤缁瑦绻濋崟顓狅紲濡炪倖鍔戦崕閬嶅触鐟欏嫮绠鹃柛顐ゅ枎閻忊晠鏌熸總澶婁簼闁瑰嘲鎳愮划娆撳垂椤旇偐绋囨繝鐢靛仜閻°劎鍒掔仦杞挎盯寮崒姘亰闂佸壊鍋嗛崰鎾诲煝閺囥垺鐓曟い鎰靛亜婢ф壆绱掗埀顒佸緞婵炴帒缍婇幃鈺咁敊閻撳骸顫撻柣搴㈩問閸ｏ綁藟閹捐绠憸鐗堝笒椤懘鏌ｅΟ鐑樷枙婵炶壈娅曠换娑㈠箣閻愭潙纰嶉梺鎸庢磸閸庣敻骞嗘笟鈧崺鍕礃椤忎焦鐏冮梻渚€鈧偛鑻晶鎵磼椤曞懎寮€殿噮鍓熼幃娆擃敆閳ь剟寮ㄩ銏♀拺闁告繂瀚顏堟煙缁嬫鐓肩€规洘娲濈粻娑樷槈濡⒈妲扮紓浣哄亾濠㈡﹢藝鏉堚晝鐭嗗鑸靛姈閻撴稓鈧箍鍎卞ú銈囨暜閸撲胶纾奸柟鎻掝儑缁♀偓闂佺娅曢惄顖炪€侀弮鍫濈妞ゆ挾鍠愰惁?
report myself #3闂傚倷鐒︾€笛呯矙閹烘挾鈹嶉柧蹇氼潐瀹曟煡鏌熸潏鍓х暠闁绘劕锕弻锝夊箛椤掆偓缁狙囨煕閻樺弶鍣介柍褜鍓濋～澶愬箖閸洖纾块柟缁㈠枛閸氳绻濇繝鍌氭灓闁哥喎鎳樺鍫曞醇濮橆厽鐝曢梺浼欑秮娴滃爼寮婚悢鐓庡瀭妞ゆ梹瀚庨敍鍕＝鐎广儱妫欓埛鎺楁煙瀹勯偊鍎旂€殿喖澧庨幑鍕Ω椤噮鍙冨娲箰鎼达絺妲堥梺鍝勭墱閸撶喖骞冭缁瑥鈻庨幆褎顓块梻濠庡亜濞诧箓鎳濋幆褉鏋斿ù鐓庣摠閸?
*/

using namespace std;
const long long mod=233333333333;
struct String{//婵犵數鍋為崹鍫曞箰閹绢喖纾婚柟鐐灱濡插牓鏌熼崹顔兼殨缂併劌銈搁弻锛勪沪閺傘倛鍚梺璇″灠閸熸潙鐣烽悢纰辨晝闁靛牆妫欓惁鐐烘⒒閸屾艾鈧敻宕戦幘鍓佺＜闁惧繗顫夊▍鎲唅ng 
	char s[35];
	char& operator[](int b){return s[b];}
	friend int cmp(String a,String b){
		for(int i=1;;i++){
			if(a[i]==b[i]&&!a[i])break;
			if(a[i]!=b[i])return a[i]<b[i]?-1:1;
		}
		return 0;
	}
	friend ostream & operator<<(ostream & out,const String& b){
		printf("%s",b.s+1);
		return out;
	}
	String(string ss){
		int top=0;
		memset(s,0,sizeof(s));
		for(int i=0;i<ss.size();i++)
			s[++top]=ss[i];
		s[++top]='\0';
	}
	String(){}
	String(char* a){
		memset(s,0,sizeof(s));
		for(int i=1;;i++){
			s[i]=a[i];
			if(!a[i])break;
		}
	}
};

bool isempty(String& a){
	return cmp(a,(String)(string)(""))==0;
}
//闂備浇宕垫慨鏉懨洪埡鍜佹晪鐟滄柨鐣烽敐澶婂耿婵炴垶顭囬悡鎴炵節閻㈤潧孝闁稿﹦顭堥銉╁箻缂堢姷绠氬銈嗗姉閸犲孩绂嶆ィ鍐┾拺?
//initialization
const int block=100;
enum node_type{Begin=1,End,normal};
enum TYPE{
	EXIT=1,SU,logout,USERADD,REGISTER,DELETE,PASSWD,SELECT,MODIFY,IMPORT,SHOW,SHOW_FINANCE,BUY,
	REPORT_FINANCE,REPORT_IMPLOYEE,REPORT_MYSELY,LOG,WRONG
};
bool check_empty(string s,int b){//濠电姷顣藉Σ鍛村磻閳ь剟鏌涚€ｎ偅宕岄柡宀嬬磿娴狅妇鎷犻幓鎺戭潚缂傚倷绶￠崰姘跺吹鏉堛劎绠鹃弶鍫濆⒔閸掓壆绱掓径濠勫煟闁诡喖娼″畷鍗炍旀繝鍌涱吙闂備線鈧偛鑻晶顖炴煙娓氬灝濡跨紓鍌涙崌椤㈡岸鍩€椤掆偓椤曪絾瀵奸幖顓熸櫖濠殿喗锕╅崢濂稿礈閵婏妇绠鹃柟瀵稿仦瀹曞嫭绻涢崪鍐М闁糕晝鍋ゅ浠嬪Ω瑜夐弸?
	for(int i=b;i<s.size();i++)if(s[i]!=' ')return 0;
	return 1;
}
void StringToChar(string s,char* a){
	int top=0;
	for(int i=0;i<s.size();i++)
		a[++top]=s[i];
	a[++top]='\0';
}
int StringToInterger(string s){
	int ans=0;
	for(int i=0;i<s.size();i++)
		ans=ans*10+s[i]-'0';
	return ans;
}
class INPUT{
	public:
	char user_id[35];
	char passwd[35];
	char name[32];
	char old_passwd[35];
	string keyword[10];
	char ISBN[35];
	char author[35];
	int quantity,time;
	double price,cost_price;
	int permission;
	bool ISBN_flag,author_flag,name_flag,keyword_flag,price_flag;
	public:
	INPUT(){
		memset(user_id,0,sizeof(user_id));
		memset(passwd,0,sizeof(passwd));
		memset(name,0,sizeof(name));
		memset(old_passwd,0,sizeof(old_passwd));
		memset(author,0,sizeof(author));
		memset(ISBN,0,sizeof(ISBN));
		quantity=time=price=cost_price=permission=0;	
		ISBN_flag=author_flag=name_flag=keyword_flag=price_flag=0;
	}
	
	TYPE input(string s){
		string iden="";bool f=0;int i;
		for(i=0;i<s.size();i++){
			if(s[i]==' '&&f)break;
			if(s[i]!=' ')f=1;
			iden+=s[i];
		}
			if(iden=="exit"){
				if(!check_empty(s,i))return WRONG;
				return EXIT;
			}
			else if(iden=="su"){
				f=0;
				string tmp("");
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' '){f=1;}
					else continue;
					tmp+=s[i];
				}
				f=0;
				string tmp2("");
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' '){f=1;}
					else continue;
					tmp2+=s[i];
				}
				if(tmp.size()>30||tmp2.size()>30)return WRONG;
				if(!check_empty(s,i))return WRONG;
				StringToChar(tmp,user_id);
				StringToChar(tmp2,passwd);
				return SU;
			}
			else if(iden=="logout"){
				if(!check_empty(s,i))return WRONG;
				return logout;
			}
			else if(iden=="useradd"){
				string tmp("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp+=s[i];
				}
				string tmp2("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp2+=s[i];
				}
				string tmp3("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp3+=s[i];
				}
				string tmp4("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp4+=s[i];
				}
				if(tmp4=="")return WRONG;
				if(tmp.size()>30||tmp2.size()>30)return WRONG;
				if(!check_empty(s,i))return WRONG;
				StringToChar(tmp,user_id);
				StringToChar(tmp2,passwd);
				if(StringToInterger(tmp3)==0)return WRONG;
				permission=StringToInterger(tmp3);
				StringToChar(tmp4,name);
				return USERADD;
			}
			else if(iden=="register"){
				string tmp("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp+=s[i];
				}
				string tmp2("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp2+=s[i];
				}
				string tmp3("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp3+=s[i];
				}
				if(tmp3=="")return WRONG;
				if(tmp.size()>30||tmp2.size()>30)return WRONG;
				if(!check_empty(s,i))return WRONG;
				StringToChar(tmp,user_id);
				StringToChar(tmp2,passwd);
				StringToChar(tmp3,name);
				return REGISTER;
			}
			else if(iden=="delete"){
				string tmp("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp+=s[i];
				}
				if(tmp.size()==0||tmp.size()>30)return WRONG;
				if(!check_empty(s,i))return WRONG;
				StringToChar(tmp,user_id);
				return DELETE;
			}
			else if(iden=="passwd"){
				string tmp("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp+=s[i];
				}
				string tmp2("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp2+=s[i];
				}
				string tmp3("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp3+=s[i];
				}
				if(tmp.size()>30||tmp2.size()>30||tmp3.size()>30)return WRONG;
				if(!check_empty(s,i))return WRONG;
				StringToChar(tmp,user_id);
				StringToChar(tmp2,old_passwd);
				StringToChar(tmp3,passwd);
				return PASSWD;
			}
			else if(iden=="select"){
				string tmp("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp+=s[i];
				}
				if(!check_empty(s,i))return WRONG;
				if(tmp.size()>20)return WRONG;
				StringToChar(tmp,ISBN);
				return SELECT;
			}
			else if(iden=="modify"){
				while(true){
					int shuangyin=0;
					string tmp("");f=0;
					for(;i<s.size();i++){
						if(s[i]==' '&&f&&(shuangyin%2==0))break;
						if(s[i]!=' ')f=1;
						else if(shuangyin%2==0)continue;
						tmp+=s[i];
						if(s[i]=='\"')shuangyin++;
					}
					if(tmp=="")break;
					if(tmp[0]!='-')return WRONG;
					if(tmp[1]=='I'){//ISBN
						string s(tmp,1,4);
						if(s!="ISBN")return WRONG;
						if(tmp[5]!='=')return WRONG;
						ISBN_flag=1;
						string s2(tmp,6,tmp.size()-6);
						if(s2.size()>20||s2.size()==0)return WRONG;
						StringToChar(s2,ISBN);
						continue;
					}
					else if(tmp[1]=='n'){
						string s(tmp,1,4);
						if(s!="name")return WRONG;
						if(tmp[5]!='=')return WRONG;
						name_flag=1;
						string s2(tmp,7,tmp.size()-8);
						if(tmp.size()<7||tmp[6]!='\"'||tmp[tmp.size()-1]!='\"')return WRONG;
						if(s2.size()>60||s2.size()==0)return WRONG;
						StringToChar(s2,name);
						continue;
					}
					else if(tmp[1]=='a'){
						string s(tmp,1,6);
						if(s!="author")return WRONG;
						if(tmp[7]!='=')return WRONG;
						author_flag=1;
						string s2(tmp,9,tmp.size()-10);
						if(tmp.size()<9||tmp[8]!='\"'||tmp[tmp.size()-1]!='\"')return WRONG;
						if(s2.size()>60||s2.size()==0)return WRONG;
						StringToChar(s2,author);
						continue;
					}
					else if(tmp[1]=='k'){
						string s(tmp,1,7);
						if(s!="keyword")return WRONG;
						if(tmp[8]!='=')return WRONG;
						keyword_flag=1;
						string s2(tmp,10,tmp.size()-11);
						if(tmp.size()<10||tmp[9]!='\"'||tmp[tmp.size()-1]!='\"')return WRONG;
						int top=0,last=0;
						for(int j=0;j<=s2.size();j++)if(s2[j]=='|'||j==s2.size()){
							string s3(s2,last,j-last);
							last=j+1;
							if(s3=="")return WRONG;
							keyword[++top]=s3;
						}
						continue;
					}
					else if(tmp[1]=='p'){
						string s(tmp,1,5);
						if(s!="price")return WRONG;
						if(tmp[6]!='=')return WRONG;
						price_flag=1;
						string s2(tmp,7,tmp.size()-7);
						char ss[20];
						StringToChar(s2,ss);
						price=atof(ss+1);
						continue;
					}
					
				}
				return MODIFY;
			}
			else if(iden=="import"){
				string tmp2("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp2+=s[i];
				}
				string tmp3("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp3+=s[i];
				}
				
				quantity=StringToInterger(tmp2);
				char q[30];
				memset(q,0,sizeof(q));
				StringToChar(tmp3,q);
				cost_price=atof(q+1);
				if(!check_empty(s,i))return WRONG;
				if(!quantity||fabs(cost_price)<1e-10)return WRONG;
				return IMPORT;
				
			}
			else if(iden=="show"){
				int y=0;
				while(++y){
					int shuangyin=0;
					string tmp("");f=0;
					for(;i<s.size();i++){
						if(s[i]==' '&&f&&(shuangyin%2==0))break;
						if(s[i]!=' ')f=1;
						else if(shuangyin%2==0)continue;
						tmp+=s[i];
						if(s[i]=='\"')shuangyin++;
					}
					if(tmp=="")break;
					if(tmp[0]!='-'){// handle show_finance
						if(tmp=="finance"&&y==1){
							if(check_empty(s,i))return SHOW_FINANCE;
							string tmp2("");f=0;
							for(;i<s.size();i++){
								if(s[i]==' '&&f)break;
								if(s[i]!=' ')f=1;
								else continue;
								tmp2+=s[i];
							}
							time=StringToInterger(tmp2);
							if(!time)return WRONG;
							return SHOW_FINANCE;
						}
						else return WRONG;
					}
					if(tmp[1]=='I'){//ISBN
						string s(tmp,1,4);
						if(s!="ISBN")return WRONG;
						if(tmp[5]!='=')return WRONG;
						ISBN_flag=1;
						string s2(tmp,6,tmp.size()-6);
						if(s2.size()>20||s2.size()==0)return WRONG;
						StringToChar(s2,ISBN);
						continue;
					}
					else if(tmp[1]=='n'){
						string s(tmp,1,4);
						if(s!="name")return WRONG;
						if(tmp[5]!='=')return WRONG;
						name_flag=1;
						string s2(tmp,7,tmp.size()-8);
						if(tmp.size()<7||tmp[6]!='\"'||tmp[tmp.size()-1]!='\"')return WRONG;
						if(s2.size()>60||s2.size()==0)return WRONG;
						StringToChar(s2,name);
						continue;
					}
					else if(tmp[1]=='a'){
						string s(tmp,1,6);
						if(s!="author")return WRONG;
						if(tmp[7]!='=')return WRONG;
						author_flag=1;
						string s2(tmp,9,tmp.size()-10);
						if(tmp.size()<9||tmp[8]!='\"'||tmp[tmp.size()-1]!='\"')return WRONG;
						if(s2.size()>60||s2.size()==0)return WRONG;
						StringToChar(s2,author);
						continue;
					}
					else if(tmp[1]=='k'){
						string s(tmp,1,7);
						if(s!="keyword")return WRONG;
						if(tmp[8]!='=')return WRONG;
						keyword_flag=1;
						string s2(tmp,10,tmp.size()-11);
						if(tmp.size()<10||tmp[9]!='\"'||tmp[tmp.size()-1]!='\"')return WRONG;
						int top=0,last=0;
						for(int j=0;j<=s2.size();j++)if(s2[j]=='|'||j==s2.size()){
							string s3(s2,last,j-last);
							last=j+1;
							if(s3=="")return WRONG;
							keyword[++top]=s3;
						}
						continue;
					}
					else if(tmp[1]=='p'){
						string s(tmp,1,5);
						if(s!="price")return WRONG;
						if(tmp[6]!='=')return WRONG;
						string s2(tmp,7,tmp.size()-7);
						char ss[20];
						StringToChar(s2,ss);
						price=atof(ss+1);
						continue;
					}
					
				}
				return SHOW;
			}
			else if(iden=="buy"){
				string tmp("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp+=s[i];
				}
				string tmp2("");f=0;
				for(;i<s.size();i++){
					if(s[i]==' '&&f)break;
					if(s[i]!=' ')f=1;
					else continue;
					tmp2+=s[i];
				}
				if(!check_empty(s,i))return WRONG;
				quantity=StringToInterger(tmp2);
				StringToChar(tmp,ISBN);
				return BUY;
			}
			//闂傚倷绀侀幖顐⑽涘Δ鍛９闁荤喖鍋婂〒濠氭煕鐏炲墽銆掗柍缁樻⒒閳ь剙绠嶉崕閬嵥囬悧鍫㈩浄婵せ鍋撻柟?
			else if(iden=="report"){
				return REPORT_FINANCE;
			}
			else if(iden=="log"){
				return LOG;
			}
			else return WRONG;
	}
};





bool check(string s){//闂傚倷绀侀幉锛勬暜閸ヮ剙纾归柡宥庡幖閽冪喖鏌涢妷顔煎闁告瑥锕ラ妵鍕冀閵娧屾殹闂佺楠搁敃顏勵潖婵犳艾鐐婇柨婵嗘噸婢规洟姊绘担鍛婂暈閻㈩垱顨堥幑銏ゅ磼閻戝洨绋忛梺鍦濠㈡绮堝畝鍕厾闁归绀侀悘鐘炽亜韫囨洖鏋旂紒杈ㄥ笒閻ｆ繈鍩€椤掑倷鐒婇柕濞у嫷娼熷┑鐘绘涧椤戝懐绮堥崱妯肩闁糕剝锚缁椦呯磼閻樺磭鍙€闁?闂傚倷鐒︾€笛呯矙閹达附鍤愭い鏍仜缁犳艾銆掑锝呬壕閻?
	ifstream it(s.c_str(),ios::in|ios::binary);
	if(!it)return 1;
	it.seekg(0,ios::end);
	if(it.tellg()==0){
		it.close();return 1;
	}
	it.close();
	return 0;
}
class Bignode{
	public:
	node_type a;//缂傚倸鍊风欢锟犲磻婢舵劦鏁嬬憸鏃堝箖?
	int node_number;//list闂傚倷鐒﹂惇褰掑礉瀹€鍕槬闁哄顩緀闂傚倷娴囧銊╂倿閿旂晫鐝堕柛鈩冾樅?
	int next,prev;//闂傚倷绀侀幉锟犲箰閸濄儳鐭撻柟缁㈠枛缁犳牗淇婇妶鍛櫣闂佽￥鍊栨穱濠囧Χ閸涱喖娅濋梺琛″亾?
	int location;//闂傚倷绀佸﹢閬嶃€傛禒瀣；闁圭偓鍓氶悢鍡涙偣閸濆嫭鎯堟い蹇ｄ邯閺岋紕鈧綆浜滈弳鐐电磼閸屾稑娴€殿喚鏁婚幃浠嬫偨閺佸被鍨荤槐?
	int node_list_begin;//闂傚倷绀佸﹢閬嶁€﹂崼婢濇椽濡舵径濠勭暫濠电姴锕ら悧鍡欑不閵夆晜鐓冪憸婊堝礈濞戞瑧顩烽柨鏇炲€归崐鐑芥煟閹寸倖鎴﹀吹閹达附鐓熼柣鎰嚟閳笺倝鏌涢弬璺ㄧ劯濠?
	Bignode(){
		a=normal;
		node_number=0;
		next=prev=location=node_list_begin=0;
	}
	void display(){
		printf("number:%d prev:%d next:%d location:%d node first:%d\n",node_number,prev,next,location,node_list_begin);
	}
};
class node{
	public:
	node_type a;//闂佽崵鍠愮划搴㈡櫠濡ゅ懎绠伴柛娑橈攻濞呯娀鏌ｅΟ鑲╁笡闁稿﹦鍏橀弻娑㈡晜鐠囨彃绠洪梺浼欑秬娴滎剛妲愰幒妤婃晝闁靛鍠栧▓顓㈡⒑?
	long long key;int value;//闂傚倷绀侀幖顐λ囬鐐茬柈妞ゆ劧绠戦悞鍨亜閹哄棗浜鹃梺闈涚墛閹倸顕ｉ锔绘晣闁靛繒濮烽敍?
	int next,prev;//闂傚倷绀侀幉锟犲箰閸濄儳鐭撻柟缁㈠枛缁犳牗淇婇妶鍕濞寸姵宀稿鍫曞醇濮橆厽鐝曢梺浼欑到瀹曨剟婀侀梺鎸庣箓閹虫劘鍊撮梻?
	int location;//闂佽崵鍠愮划搴㈡櫠濡ゅ懎绠伴柛娑橈攻濞呯娀鏌ｅΟ娆惧殭缂佺姰鍎甸弻宥堫檨闁告挻鑹鹃銉╁礋椤栨氨顦板銈嗗笂閼冲爼鍩€椤掑鏋涢棁澶愭煟濡寧鐝柡瀣缁辨挸顓奸崨顔兼缂?
	int head;//闂傚倷绀佸﹢閬嶃€傛禒瀣；闁瑰墽绮崐鐢告煟閵忕姷浠涢柛銈傚亾缂傚倷闄嶉崝宥夋偂閿熺姴绠氶柛鎰靛枛缁€鍡樸亜閿涘嫭顥ode 闂傚倷鐒﹂惇褰掑礉瀹€鈧埀顒佸嚬娴滅偟妲愰悙鍝勫窛妞ゆ牗绮庨敍?
	node(){
		a=normal;
		key=0;
		value=0;
		next=prev=location=head=0;
	}
	void display(){
		printf("prev:%d next:%d location:%d\n",prev,next,location);
		printf("key:%lld value:%d\n",key,value);
	}
};
node Q[11000];int Top;
long long trans(String s){
	long long ans=0;
	for(int i=1;;i++){
		if(s[i]=='\0')break;
		ans=(ans*233+s[i])%mod;
	}
	return ans;
}
class BlockLinkList{
	public:
	string F;//闂備礁鎼ˇ顖炴偋婵犲洤绠伴柟闂寸閸氳銇勯幘鍗炵仼婵☆偅锕㈤弻娑㈠Ψ椤栫偞顎嶅?
	fstream file;
	template<class T>
	T get(int location){//闂傚倷鑳堕崕鐢稿疾濞戙垺鍋ら柕濞у嫭娈伴梺鍝勵槹閸╁牓宕靛Δ浣风箚闁靛牆鍊告禍楣冩⒑缁洘娅呮い鏂垮煟cation婵犵數鍋犻幓顏嗗緤閻ｅ瞼鐭撻柛顐ｆ礃閸嬵亪鏌涢埄鍐姇闁稿骸绉归弻娑㈠即閵娿儰绨荤紓?
		file.open(F.c_str(),ios::binary|ios::in);
		file.seekg(location);
		T a;
		file.read(reinterpret_cast<char *> (&a),sizeof(a));
		file.close();
		return a;
	}
	long long get_begin_node(Bignode& h){//闂佽娴烽弫鍛婃櫠濡ゅ懌鈧啴宕ㄩ弶鎴炴К闁诲骸顕栭崶銊у幗闂侀潧顭堥崕閬嶎敂椤愶絻浜滈柟瀛樼箖婢跺嫮绱掔€ｎ亶妯€闁糕斁鍋撳銈嗗笂閼冲爼鍩㈤弮鍫熺厽婵椴哥亸顡块梻?
		node begin=get<node>(h.node_list_begin);
		node first=get<node>(begin.next);
		return first.key;
	}
	template<class T>
	void updata(T& a){//闂傚倷绀侀幖顐⒚洪妶澶嬪仱闁靛ň鏅涢拑鐔封攽閻樺弶鎼愭俊顐ｏ耿閺屾盯濡烽鐐搭€嶅?
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekp(a.location);
		file.write(reinterpret_cast<const char *> (&a),sizeof(a));
		file.close();
	}
	void foundinend(Bignode& a){
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekp(0,ios::end);
		a.location=file.tellp();
		file.write(reinterpret_cast<const char *> (&a),sizeof(a));
		file.close();
	}
	void foundinend(node& a){
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekp(0,ios::end);
		a.location=file.tellp();
		file.write(reinterpret_cast<const char *> (&a),sizeof(a));
		file.close();
	}
	node getend(node a){
		while(a.a!=End)
			a=get<node>(a.next);
		return a;
	}
	void getprev(node a,long long key){
		while(true){
			if(a.a==Begin){
				Bignode c=get<Bignode>(a.head);
				c=get<Bignode>(c.prev);
				if(c.a==Begin)break;
				a=getend(get<node>(c.node_list_begin));
			}
			if(a.a==End)a=get<node>(a.prev);
			if(a.a!=normal)break;
			
			if(a.key==key){
				Q[++Top]=a;
				a=get<node>(a.prev);
			}
			else break;
		}
		return ;
		
	}
	void getnext(node a,long long key,int flag=0){
		while(true){
			if(a.a==End){
				Bignode c=get<Bignode>(a.head);
				c=get<Bignode>(c.next);
				if(c.a==End)break ;
				a=get<node>(c.node_list_begin);
			}
			if(a.a==Begin)a=get<node>(a.next);
			if(a.a!=normal)break ;
			if(a.key==key||flag){
				Q[++Top]=a;
				a=get<node>(a.next);
			}
			else break;
		}
		return ;
	}
	void bianli(){
		Top=0;
		Bignode x=get<Bignode>(0);
		x=get<Bignode>(x.next);
		node a=get<node>(x.node_list_begin);
		getnext(a,a.key,1);
	}
	int get_node_number(Bignode& a){
		if(a.a!=normal)return 0;
		node x=get<node>(a.node_list_begin);
		x=get<node>(x.next);
		int sum=0;
		while(x.a!=End){
			sum++;
			x=get<node>(x.next);
		}
		return sum;
	}
	void updata_head(node a){
		node x=a;
		while(true){
			x.head=get<node>(x.prev).head;
			updata(x);
			if(x.a==End)break;
			x=get<node>(x.next);
		}
	}
	void split(Bignode& a){
		/*	node_type a;//闂佽崵鍠愮划搴㈡櫠濡ゅ懎绠伴柛娑橈攻濞呯娀鏌ｅΟ鑲╁笡闁稿﹦鍏橀弻娑㈡晜鐠囨彃绠洪梺浼欑秬娴滎剛妲愰幒妤婃晝闁靛鍠栧▓顓㈡⒑?
		String key;int value;//闂傚倷绀侀幖顐λ囬鐐茬柈妞ゆ劧绠戦悞鍨亜閹哄棗浜鹃梺闈涚墛閹倸顕ｉ锔绘晣闁靛繒濮烽敍?
		int next,prev;//闂傚倷绀侀幉锟犲箰閸濄儳鐭撻柟缁㈠枛缁犳牗淇婇妶鍕濞寸姵宀稿鍫曞醇濮橆厽鐝曢梺浼欑到瀹曨剟婀侀梺鎸庣箓閹虫劘鍊撮梻?
		int location;//闂佽崵鍠愮划搴㈡櫠濡ゅ懎绠伴柛娑橈攻濞呯娀鏌ｅΟ娆惧殭缂佺姰鍎甸弻宥堫檨闁告挻鑹鹃銉╁礋椤栨氨顦板銈嗗笂閼冲爼鍩€椤掑鏋涢棁澶愭煟濡寧鐝柡瀣缁辨挸顓奸崨顔兼缂?
		int head;*/
		/*
		node_type a;//缂傚倸鍊风欢锟犲磻婢舵劦鏁嬬憸鏃堝箖?
		int node_number;//list闂傚倷鐒﹂惇褰掑礉瀹€鍕槬闁哄顩緀闂傚倷娴囧銊╂倿閿旂晫鐝堕柛鈩冾樅?
		int next,prev;//闂傚倷绀侀幉锟犲箰閸濄儳鐭撻柟缁㈠枛缁犳牗淇婇妶鍛櫣闂佽￥鍊栨穱濠囧Χ閸涱喖娅濋梺琛″亾?
		int location;//闂傚倷绀佸﹢閬嶃€傛禒瀣；闁圭偓鍓氶悢鍡涙偣閸濆嫭鎯堟い蹇ｄ邯閺岋紕鈧綆浜滈弳鐐电磼閸屾稑娴€殿喚鏁婚幃浠嬫偨閺佸被鍨荤槐?
		int node_list_begin;//闂傚倷绀佸﹢閬嶁€﹂崼婢濇椽濡舵径濠勭暫濠电姴锕ら悧鍡欑不閵夆晜鐓冪憸婊堝礈濞戞瑧顩烽柨鏇炲€归崐鐑芥煟閹寸倖鎴﹀吹閹达附鐓熼柣鎰嚟閳笺倝鏌涢弬璺ㄧ劯濠?
		*/
		
		if(a.a!=normal)return ;
		Bignode next_Bignode=get<Bignode>(a.next);
		Bignode new_Bignode;
		foundinend(new_Bignode);
		new_Bignode.a=normal;
		new_Bignode.prev=a.location;
		new_Bignode.next=next_Bignode.location;
		
		next_Bignode.prev=new_Bignode.location;
		a.next=new_Bignode.location;
		
		
		
		int number=a.node_number/2;
		int sum=0;
		node x=get<node>(a.node_list_begin);
		
		x=get<node>(x.next);
		for(int i=1;i<=number;i++)
			x=get<node>(x.next);
		node y=get<node>(x.next);
		
		node new_end_node,new_begin_node;
		foundinend(new_begin_node);
		foundinend(new_end_node);
		
		new_begin_node.a=Begin;
		new_end_node.a=End;
		
		new_begin_node.next=y.location;
		new_begin_node.head=new_Bignode.location;
		y.prev=new_begin_node.location;
		y.head=new_Bignode.location;
		updata_head(y);
		
		x.next=new_end_node.location;
		new_end_node.prev=x.location;
		
		new_Bignode.node_list_begin=new_begin_node.location;
		
		
		updata(a);updata(next_Bignode);updata(new_Bignode);
		updata(x);updata(y);updata(new_begin_node);updata(new_end_node);
		
		new_Bignode.node_number=get_node_number(new_Bignode);
		a.node_number=get_node_number(a);
		
		updata(a);updata(next_Bignode);
	}
	void updata(){
		Bignode x=get<Bignode>(0);
		x=get<Bignode>(x.next);
		while(x.a!=End){
			
			x=get<Bignode>(x.next);
		}
	}
	
	
	
	
	node find(long long key){
		Bignode x=get<Bignode>(0);
		x=get<Bignode>(x.next);
		while(true){
			if(get<Bignode>(x.next).a==End)break;
			Bignode c=get<Bignode>(x.next);
			if(get_begin_node(c)>key)break;
			x=c;
		}
		node y=get<node>(x.node_list_begin);
		while(true){
			if(get<node>(y.next).a==End)break;
			node c=get<node>(y.next);
			if(c.key>key)break;
			y=c;
		}
		
		if(y.key==key){
			Top=0;
			getprev(y,key);
			getnext(y,key);
			return y;
		}
		return y;
	}
	void initialization(string s){
		F=s;
		if(!check(s))return;
		file.open(F.c_str(),ios::binary|ios::out);
		file.close();
		
		Bignode x,y,z;
		x.a=Begin;y.a=normal,z.a=End;
		foundinend(x),foundinend(y),foundinend(z);
		x.next=y.location;z.prev=y.location;
		y.prev=x.location,y.next=z.location;
		
		
		node a,b;
		foundinend(a);foundinend(b);
		a.a=Begin,b.a=End;
		a.head=b.head=y.location;
		foundinend(a),foundinend(b);
		a.next=b.location;b.prev=a.location;
		
		y.node_list_begin=a.location;
		
		updata(a),updata(b),updata(x),updata(y),updata(z);
		return ;
	}
	void erase_a_node(node& now){
		node pre,nex;
		if(now.a!=normal)return ;
		pre=get<node>(now.prev),nex=get<node>(now.next);
		pre.next=nex.location,nex.prev=pre.location;
		Bignode h=get<Bignode>(pre.head);
		h.node_number--;
		updata(pre),updata(nex),updata(h);
	}
	void found_a_node(String Key,int value){
		long long key=trans(Key);
		node y=find(key);
		
		
		node nex=get<node>(y.next);
		node now;
		now.head=nex.head;
		now.key=key,now.value=value;
		foundinend(now);
		nex.prev=now.location;y.next=now.location;
		now.prev=y.location;now.next=nex.location;
		now.a=normal;
		updata(now),updata(y),updata(nex);
		Bignode c=get<Bignode>(y.head);
		c.node_number++;
		updata(c);
		if(c.node_number>2*block)split(c);
	}
	
	void display(){
		Bignode x=get<Bignode>(0);
		x=get<Bignode>(x.next);
		node y=get<node>(x.node_list_begin);
		y=get<node>(y.next);
		printf("\n");
		printf("\n");
		while(true){
			if(y.a==End)break;
			y.display();
			y=get<node>(y.next);
		}
		printf("\n");
		printf("\n");
	}
};

//void found(String a,int value)
//node find (String key)
//闂傚倷鑳堕～瀣礋閸偆鏆┑鐘愁問閸犳骞冮崒鐐茶摕鐟滄棃鐛幋锕€绠涢柍瑙勫劤娴?




BlockLinkList USER_index;
class user_node{
	public:
	String name,user_id,passwd;
	int pri,location;
	user_node(){
		pri=location=0;
		name=user_id=passwd=(string)("");
	}
	void display(){
		printf("%s %s %s %d %d\n",user_id.s+1,name.s+1,passwd.s+1,pri,location);
	}
}unknown;//闂傚倷绀侀幖顐︽偋濠婂嫮顩查柣鎰ゴ閺嬪秹鏌曟径鍫濆Ω濞存粌缍婇弻锟犲炊閳轰絿锝夋煛閸℃绠婚柡?
class USER{//闂傚倷鐒﹀鍨焽閸ф绀夌€广儱顦弰銉︾箾閹寸偟鎳呴柍鐟扮Ч閺屽秹鍩℃担鍛婃缂?
	public:
	string F;
	fstream file;
	user_node now;//闂佽崵鍠愮划搴㈡櫠濡ゅ懎绠伴柛娑橈攻濞呯娀鏌ｅΟ鑲╁笡闁稿鍔戦弻鏇熺節韫囨洜鏆犻梺?
	template<class T>
	void updata(T& a){//闂傚倷绀侀幖顐⒚洪妶澶嬪仱闁靛ň鏅涢拑鐔封攽閻樺弶鎼愭俊顐ｏ耿閺屾盯濡烽鐐搭€嶅?
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekp(a.location);
		file.write(reinterpret_cast<const char *> (&a),sizeof(a));
		file.close();
	}
	template<class T>//闂傚倷绶氬鑽ゆ嫻閻旂厧绀夌€广儱顦崙鐘绘煕閹般劍娅囨い鈺冨厴閹銈﹂幐搴哗闂佸摜鍠愰悡锟犲蓟濞戙垹绠抽柟鎯х亪濡插牏绱撻崒姘偓褰掑箰閼姐倗鐭欏鑸靛姇閻掑灚銇勯幒宥堝厡闁崇粯姊归妵鍕疀閹炬潙娅ら梺缁樻尨閸嬫挾绱撻崒娆戣窗闁稿顦甸、姘愁樄闁诡喗顨婇幃婊堟嚍閵夛附鐝梺璇茬箳閸嬫盯鍩€椤掑倸鏋庨柣婵愬灦閺屸剝寰勯崱妯荤彆闂佸搫琚崝宀€鍙呴梺鍝勭▉閸樿偐绮堥崒鐐寸厸闁割偁鍨洪弳鈺冪磼婢跺鍤熺紒?
	void foundinend(T& a){
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekp(0,ios::end);
		a.location=file.tellp();
		file.write(reinterpret_cast<const char *> (&a),sizeof(a));
		file.close();
	}
	user_node get(int location){
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekg(location);
		user_node a;
		file.read(reinterpret_cast<char *> (&a),sizeof(a));
		file.close();
		return a;
	}
	
	void init(int x){
		F="user.txt";
		if(check(F)){
			file.open(F.c_str(),ios::out|ios::binary);
			file.close();
		}
		USER_index.initialization("USER_index.txt");
		now=unknown;
		if(x==0){
			user_node root;
			root.user_id=root.name=(String)(string)("root");
			root.passwd=(String)(string)("sjtu");
			root.pri=7;
			foundinend(root);
			USER_index.found_a_node(root.user_id,root.location);
			now=root;
		}
		now=get(0);
	}
	void logout(){
		now=unknown;
	}
	void Su(String user_id,String passwd){
		node c=USER_index.find(trans(user_id));
		if(c.key!=trans(user_id))throw 1;
		user_node a=get(c.value);
		if(now.pri>a.pri){
			now=a;
			return ;
		}
		if(cmp(a.passwd,passwd))throw 1;
		now=a;
	}
	void Useradd(String user_id,String passwd,int pri,String name){
		if(now.pri<=pri||(pri!=7&&pri!=3&&pri!=1))throw 1;
		node b=USER_index.find(trans(user_id));
		if(b.key==trans(user_id))throw 1;
		user_node a;a.user_id=user_id,a.passwd=passwd,a.pri=pri,a.name=name;
		foundinend(a);
		USER_index.found_a_node(user_id,a.location);
	}
	void Register(String user_id,String passwd,String name){
		node b=USER_index.find(trans(user_id));
		if(b.key==trans(user_id))throw 1;
		user_node a;a.user_id=user_id,a.passwd=passwd,a.pri=1,a.name=name;
		foundinend(a);
		USER_index.found_a_node(user_id,a.location);
	}
	void Delete(String user_id){
		node b=USER_index.find(trans(user_id));
		if(b.key!=trans(user_id))throw 1;
		USER_index.erase_a_node(b);
	}
	void Passwd(String user_id,String old_passwd,String passwd){
		node b=USER_index.find(trans(user_id));
		if(b.key!=trans(user_id))throw 1;
		user_node a=get(b.value);
		if(!cmp(now.user_id,(String)(string)("root"))){
			a.passwd=old_passwd;
			updata(a);
			return;
		}
		if(cmp(a.passwd,old_passwd))throw 1;
		a.passwd=passwd;
		updata(a);
	}
}USER_it;

class LOG{
	public:
	string F;
	fstream file;
	int getsum(){
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekg(0,ios::end);
		int k=file.tellg();file.close();
		return k/sizeof(pair<double,double>);
	}
	template<class T>
	T get(int location){//闂傚倷鑳堕崕鐢稿疾濞戙垺鍋ら柕濞у嫭娈伴梺鍝勵槹閸╁牓宕靛Δ浣风箚闁靛牆鍊告禍楣冩⒑缁洘娅呮い鏂垮煟cation婵犵數鍋犻幓顏嗗緤閻ｅ瞼鐭撻柛顐ｆ礃閸嬵亪鏌涢埄鍐姇闁稿骸绉归弻娑㈠即閵娿儰绨荤紓鍌氱С缁舵艾顫忓ú顏呭殤闁煎摜鏁搁妴濠傗攽閻愬瓨缍戞い锕備憾閸┾偓妞ゆ帒鍊归弳顒勬煃瑜滈崜姘辩矙閹剧粯鍤屽Δ锝呭暞閻撴盯鏌涢锝堝濞存粓绠栧娲川婵犲懎顥濆┑鐐存綑閸㈡煡鍩㈤幘璇茬闁绘劖娼欓鎾绘倵楠炲灝鍔氭繛灞傚姂瀵?
		file.open(F.c_str(),ios::in|ios::binary);
		file.seekg(-location,ios::end);
		T a;
		file.read(reinterpret_cast<char *> (&a),sizeof(a));
		file.close();
		return a;
	}
	template<class T>
	void foundinend(T& a){
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekp(0,ios::end);
		file.write(reinterpret_cast<const char *> (&a),sizeof(a));
		file.close();
	}
	void init(){
		F="finance.txt";
		if(check(F)){
			file.open(F.c_str(),ios::out|ios::binary);
			pair<double,double> a=make_pair(0,0);
			file.write(reinterpret_cast<char* >(&a),sizeof(a));
			file.close();
		}
	}
	void found(double money,int id){//flag{ 0 :cost 1: income}
		pair<double,double> a;
		if(id==0)a=make_pair(money,0);
		else a=make_pair(0,money);
		pair<double,double> last=get<pair<double,double> >((sizeof (pair<double,double>)));
		a.first+=last.first,a.second+=last.second;
		foundinend(a);
	}
	
	pair<double,double> 
		find(int key){//闂傚倷鑳堕幊鎾绘倶濮樿泛纾块柟鎯版閺勩儳鈧厜鍋撻柛鏇ㄥ亜閻濇﹢姊洪柅鐐茶嫰婢ь垱绻涢悡搴吋妤犵偛鐗忕紓鎾绘偉閺囩偐鏀介柣鎰级閿涙梻绱掓潏銊︾闁崇粯鎹囬獮瀣倷缂堢姵鍞夋繝鐢靛仦閸ㄥ墎鍒掑鍫涗汗婵炴垯鍨洪悡娆撴倵濞戞瑯鐒藉褎濞婇弻宥堫檨闁告挻鐟╅獮濠冩償閿涘嫭娈鹃梺缁橆焾椤曆呯矆閸曨垱鐓熼柟瀵稿€栭幋锕€绠氭繛鍡楃贩?
		if(!key)key=getsum()-1;
		double income=0,pay=0;
		pair<double,double> a=get<pair<double,double> >((sizeof (pair<double,double>))*(key+1));
		pair<double,double> b=get<pair<double,double> >((sizeof (pair<double,double>))*(1));
		pay=b.first-a.first,
		income=b.second-a.second;
		return make_pair(pay,income);
	}
}LOG_it;


class book{//婵犵數鍋為崹璺何涢幋鐘典笉闁瑰濮炬慨鎶芥⒑椤掆偓缁夋挳寮伴妷鈺傜厽闁瑰鍊栭幋锕€绠梺顒€绉甸悡鏇熶繆閵堝嫮鍔嶇痪鎹愬吹缁?
	public:
	String ISBN,author,name,keyword[10];
	int location;//闂備浇宕垫慨鎶芥倿閿曗偓椤灝螣閼测晝顦悗骞垮劚椤︻垳绮堥崒鐐村仯闁惧繒鎳撻崝瀣椤掑澧撮柡宀嬬節瀹曟帒顫濋鐘靛幀婵犵數鍋涘Λ搴ㄥ垂閾忓湱鐭欏鑸靛姦閺佸洭鏌ｅΟ铏癸紞闁哄棛濮电换娑欐綇閸撗冨煂缂備礁顦悥濂稿箖?
	double price;
	int quantity;
	bool ISBN_flag,author_flag,name_flag,keyword_flag,price_flag;
	book(){
		ISBN=author=name=(String)(string)("");
		for(int i=0;i<9;i++)keyword[i]=(String)(string)("");
		location=price=quantity=0;
	}
	void display(){
		printf("%s\t%s\t%s\t",ISBN.s+1,name.s+1,author.s+1);
		for(int i=1;;i++){
			if(!cmp(keyword[i],(String)(string)(""))){
				break;
			}
			else {
				if(i==1)printf("%s",keyword[i].s+1);
				else printf("|%s",keyword[i].s+1);
			}
		}
		printf("\t%.2lf\t",price);
		printf("%d本\n",quantity);
	}
	bool operator!=(book& c){
		if(cmp(ISBN,c.ISBN)||cmp(author,c.author)||cmp(name,c.name)||cmp(keyword[1],c.keyword[1]))return 1;
		if(location!=c.location||fabs(price-c.price)>1e-9)return 1;
		if(quantity!=c.quantity)return 1;
		return 0;
	}
	bool operator==(book& c){
		return !(*this!=c);
	}
}unknownn,q[11000];int top=0;
bool cmp2(book& a,book& b){return cmp(a.ISBN,b.ISBN)==-1;}
BlockLinkList author_index,ISBN_index,name_index,keyword_index;

class BOOK{
	public:
	string F;
	fstream file;
	book now;bool select_flag;
	template<class T>
	void updata(T& a){//闂傚倷绀侀幖顐⒚洪妶澶嬪仱闁靛ň鏅涢拑鐔封攽閻樺弶鎼愭俊顐ｏ耿閺屾盯濡烽鐐搭€嶅?
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekp(a.location);
		file.write(reinterpret_cast<const char *> (&a),sizeof(a));
		file.close();
	}
	template<class T>//闂傚倷绶氬鑽ゆ嫻閻旂厧绀夌€广儱顦崙鐘绘煕閹般劍娅囨い鈺冨厴閹銈﹂幐搴哗闂佸摜鍠愰悡锟犲蓟濞戙垹绠抽柟鎯х亪濡插牏绱撻崒姘偓褰掑箰閼姐倗鐭欏鑸靛姇閻掑灚銇勯幒宥堝厡闁崇粯姊归妵鍕疀閹炬潙娅ら梺缁樻尨閸嬫挾绱撻崒娆戣窗闁稿顦甸、姘愁樄闁诡喗顨婇幃婊堟嚍閵夛附鐝梺璇茬箳閸嬫盯鍩€椤掑倸鏋庨柣婵愬灦閺屸剝寰勯崱妯荤彆闂佸搫琚崝宀€鍙呴梺鍝勭▉閸樿偐绮堥崒鐐寸厸闁割偁鍨洪弳鈺冪磼?
	void foundinend(T& a){
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekp(0,ios::end);
		a.location=file.tellp();
		file.write(reinterpret_cast<const char *> (&a),sizeof(a));
		file.close();
	}
	book get(int location){
		file.open(F.c_str(),ios::in|ios::out|ios::binary);
		file.seekg(location);
		book a;
		file.read(reinterpret_cast<char *> (&a),sizeof(a));
		file.close();
		return a;
	}
	void init(int flag){
		F="book.txt";
		if(check(F)){
			file.open(F.c_str(),ios::out|ios::binary);
			file.close();
		}
		author_index.initialization((string)("author_index.txt"));
		ISBN_index.initialization((string)("ISBN_index.txt"));
		name_index.initialization((string)("name_index.txt"));
		keyword_index.initialization((string)("keyword_index.txt"));
		now=unknownn;
		select_flag=0;
	}
	void erase(book& a,int flag){//闂傚倷绀侀幉锛勬暜閻愬绠鹃柍褜鍓氱换娑㈠川椤撶儐鍔夌紓浣割儏椤︾敻宕洪埀顒併亜閹烘垵顏╅悗姘槹閵囧嫰骞嬪┑鍫滆檸婵犳鍠楅惄顖炲蓟閿濆惟闁靛鍎烘导鈧梻浣侯焾鐞氼偊宕濆畝鍕垫晪?
	
		if(flag==0){
			if(isempty(a.ISBN))return ;
			node y=ISBN_index.find(trans(a.ISBN));
			if(y.key!=trans(a.ISBN))throw 1;
			ISBN_index.erase_a_node(y);
			a.ISBN=(String)(string)("");
			return ;
		}
		
		
		if(flag==1){//闂傚倷绀侀幉锛勬暜閻愬绠鹃柍褜鍓氱换娑㈠川椤撶姭鏀瑄thor
			if(isempty(a.author))return ;
			node y=author_index.find(trans(a.author));
			a.author=(String)(string)("");
			for(int i=1;i<=Top;i++){
				book k=get(Q[i].location);
				if(cmp(k.ISBN,a.ISBN)==0){
					author_index.erase_a_node(Q[i]);
					return ;
				}
			}
			return ;
		}
		if(flag==2){//name
			if(isempty(a.name))return ;
			node y=name_index.find(trans(a.name));
			a.name=(String)(string)("");
			for(int i=1;i<=Top;i++){
				book k=get(Q[i].location);
				if(cmp(k.ISBN,a.ISBN)==0){
					name_index.erase_a_node(Q[i]);
					return ;
				}
			}
			return ;
		}
		if(flag==3){//keyword
			if(isempty(a.keyword[1]))return ;
			for(int id=1;id<=29;id++){
				if(cmp(a.keyword[id],(String)(string)(""))==0)break;
				keyword_index.find(trans(a.keyword[id]));
				a.keyword[id]=(String)(string)("");
				for(int i=1;i<=Top;i++){
					book k=get(Q[i].location);
					if(cmp(k.ISBN,a.ISBN)==0){
						keyword_index.erase_a_node(Q[i]);
						break;
					}
				}
			}
			return ;
		}
	}
	
	void select(String ISBN){
		select_flag=1;
		node b=ISBN_index.find(trans(ISBN));
		if(b.key==trans(ISBN)){
			now=get(b.value);
		}
		else {
			now=unknownn;
			now.ISBN=ISBN;
			foundinend(now);
			ISBN_index.found_a_node(now.ISBN,now.location);
		}
	}
	
	void modify(book c){
		if(!select_flag)throw 1;
		
		if(c.ISBN_flag){
			node b=ISBN_index.find(trans(c.ISBN));
			if((b.key==trans(c.ISBN)))throw 1;
			
			erase(now,0);
			now.ISBN=c.ISBN;
			ISBN_index.found_a_node(now.ISBN,now.location);
		}
		
		if(c.author_flag){
			erase(now,1);
			now.author=c.author;
			author_index.found_a_node(now.author,now.location);
		}
		if(c.name_flag){
			erase(now,2);
			now.name=c.name;
			name_index.found_a_node(now.name,now.location);
		}
		if(c.keyword_flag){
			erase(now,3);
			for(int i=1;i<=29;i++){
				if(isempty(c.keyword[i]))break;
				now.keyword[i]=c.keyword[i];
				keyword_index.found_a_node(now.keyword[i],now.location);
			}
		}
		if(c.price_flag)
			now.price=c.price;
		updata(now);
		
	}
	void import(int quantity,double cost){
		if(!select_flag)throw 1;
		now.quantity+=quantity;
		updata(now);
		LOG_it.found(cost,0);
	}
	bool checkbook(book& a,book& c){
		if((a.author_flag||c.author_flag)&&cmp(a.author,c.author))return 1;
		if((a.name_flag||c.name_flag)&&cmp(a.name,c.name))return 1;
		if((a.ISBN_flag||c.ISBN_flag)&&cmp(a.ISBN,c.ISBN))return 1;
		return 0;
	}
	void show(book a){
		if(a==unknownn){
			top=0;
			ISBN_index.bianli();
			for(int i=1;i<=Top;i++){
				a=get(Q[i].value);
				q[++top]=a;
			}
			sort(q+1,q+top+1,cmp2);
			for(int i=1;i<=top;i++)
				if(q[i]!=q[i-1])
					q[i].display();
			return ;
		}
		else {
			
			if(a.ISBN_flag){
				node b=ISBN_index.find(trans(a.ISBN));
				if(trans(a.ISBN)!=b.key){return;}
				book c=get(b.value);
				if(!checkbook(a,c))
					c.display();
				return ;
			}
			if(a.author_flag){
				top=0;
				author_index.find(trans(a.author));
				for(int i=1;i<=Top;i++){
					node b=Q[i];
					book c=get(b.value);
					if(!checkbook(c,a))q[++top]=c;
				}
				sort(q+1,q+top+1,cmp2);
				for(int i=1;i<=top;i++){
					if(q[i]!=q[i-1])
						q[i].display();
				}
				return ;
			}
			if(a.name_flag){
				top=0;
				name_index.find(trans(a.name));
				for(int i=1;i<=Top;i++){
					node b=Q[i];
					book c=get(b.value);
					if(!checkbook(c,a))q[++top]=c;
				}
				sort(q+1,q+top+1,cmp2);
				for(int i=1;i<=top;i++){
					if(q[i]!=q[i-1])
						q[i].display();
				}
				return ;
			}
			top=0;
			keyword_index.find(trans(a.keyword[1]));
			for(int i=1;i<=Top;i++){
				node b=Q[i];
				book c=get(b.value);
				if(!checkbook(c,a))q[++top]=c;
			}
			sort(q+1,q+top+1,cmp2);
			for(int i=1;i<=top;i++){
				if(q[i]!=q[i-1]) 
					q[i].display();
			}
			return ;
		}
	}
	void show_finance(int time){
		printf("+ %.2lf - %.2lf\n",LOG_it.find(time).second,LOG_it.find(time).first);
	}
	void buy(String ISBN,int quantity){
		node b=ISBN_index.find(trans(ISBN));
		if(b.key!=trans(ISBN))throw 1;
		book c=get(b.value);
		if(c.quantity<quantity)throw 1;
		c.quantity-=quantity;
		LOG_it.found(quantity*c.price,1);
		updata(c);
	}
}BOOK_it;






void initialization(){
	LOG_it.init();
	if(check("ISBN_index.txt")){
		USER_it.init(0);
		BOOK_it.init(0);
	}
	else {
		USER_it.init(1);
		BOOK_it.init(1);
	}
	
}
void init(){
	initialization();
	string s;
	ifstream check_load("command.txt");
	int flag=0;
	if(!check_load)flag=0;
	else flag=1;
	int sum=0;
	while(true){
		sum++;
		if(flag)getline(check_load,s);
		else getline(cin,s);
		if(s.size()==0){continue;}
		INPUT a;
		TYPE aaa=a.input(s);
		String User_id,Passwd,Name,Old_passwd;int pri;
		String ISBN,author,keyword,price;
		book c=unknownn;double cost=0;int quantity=0;int time=0;
		try{
		switch (aaa){
			case (EXIT):
				exit(0);
				break;
			case (SU):
				User_id=a.user_id,Passwd=a.passwd;
				USER_it.Su(User_id,Passwd);
				break;
			case (logout):
				if(USER_it.now.pri<1)throw 1;
				USER_it.logout();
				break;
			case (USERADD):
				if(USER_it.now.pri<3)throw 1;
				User_id=a.user_id;Name=a.name;
				Passwd=a.passwd;pri=a.permission;
				USER_it.Useradd(User_id,Passwd,pri,Name);
				break;
			case (REGISTER):
				User_id=a.user_id;Name=a.name;
				Passwd=a.passwd;
				USER_it.Register(User_id,Passwd,Name);
				break;
			case (DELETE):
				if(USER_it.now.pri!=7)throw 1;
				User_id=a.user_id;
				USER_it.Delete(User_id);
				break;
			case (PASSWD):
				if(USER_it.now.pri<1)throw 1;
				User_id=a.user_id;Passwd=a.passwd;Old_passwd=a.old_passwd;
				USER_it.Passwd(User_id,Old_passwd,Passwd);
				break;
			case (SELECT):
				if(USER_it.now.pri<3)throw 1;
				ISBN=a.ISBN;
				BOOK_it.select(ISBN);
				break;
			case (MODIFY):
				if(USER_it.now.pri<3)throw 1;
				c.ISBN=a.ISBN;c.name=a.name;c.author=a.author;
				c.price=a.price;
				c.ISBN_flag=a.ISBN_flag;c.name_flag=a.name_flag;c.author_flag=a.author_flag;
				c.keyword_flag=a.keyword_flag;c.price_flag=a.price_flag;
				for(int i=1;i<30;i++){
					if(a.keyword[i].size()==0)break;
					c.keyword[i]=a.keyword[i];
				}
				BOOK_it.modify(c);
				break;
			case (IMPORT):
				if(USER_it.now.pri<3)throw 1;
				quantity=a.quantity;
				cost=a.cost_price;
				BOOK_it.import(quantity,cost);
				break;
			case SHOW:
				if(USER_it.now.pri==0)throw 1;
				c.author=a.author;
				c.keyword[1]=a.keyword[1];
				c.ISBN=a.ISBN;c.name=a.name;
				c.keyword_flag=a.keyword_flag;
				c.ISBN_flag=a.ISBN_flag;c.name_flag=a.name_flag;c.author_flag=a.author_flag;
				BOOK_it.show(c);
				break;
			case (SHOW_FINANCE):
				if(USER_it.now.pri!=7)throw 1;
				time=a.time;
				BOOK_it.show_finance(time);
				break;
			case (BUY):
				if(USER_it.now.pri==0)throw 1;
				ISBN=a.ISBN;
				quantity=a.quantity;
				BOOK_it.buy(ISBN,quantity);
				break;
			case (WRONG):
				printf("Invalid\n");
				//cout<<s<<endl;
				break;
			}
		}
		catch(...){
			printf("Invalid\n");
			//cout<<s<<endl;
		}
	}
	check_load.close();
}
int main(){
	//freopen("chad.out","w",stdout);
	init();
	return 0;
}
